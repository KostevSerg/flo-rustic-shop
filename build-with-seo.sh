#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –±–∏–ª–¥–∞ —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π SEO-—Å—Ç—Ä–∞–Ω–∏—Ü
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: ./build-with-seo.sh

echo "üöÄ –ó–∞–ø—É—Å–∫ –±–∏–ª–¥–∞ —Å SEO-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π..."
echo ""

# 1. –û–±—ã—á–Ω—ã–π –±–∏–ª–¥
echo "üì¶ –®–∞–≥ 1/2: –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞..."
npm run build

if [ $? -ne 0 ]; then
    echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –ø—Ä–æ–µ–∫—Ç–∞"
    exit 1
fi

echo "‚úÖ –ü—Ä–æ–µ–∫—Ç —Å–æ–±—Ä–∞–Ω"
echo ""

# 2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—á–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
echo "üîß –®–∞–≥ 2/2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SEO-—Å—Ç—Ä–∞–Ω–∏—Ü..."
node scripts/generate-static-pages.js

if [ $? -ne 0 ]; then
    echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ SEO-—Å—Ç—Ä–∞–Ω–∏—Ü"
    exit 1
fi

echo ""
echo "‚úÖ SEO-—Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã"
echo ""
echo "üéâ –ì–æ—Ç–æ–≤–æ! –ü—Ä–æ–µ–∫—Ç —Å–æ–±—Ä–∞–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ meta-—Ç–µ–≥–∞–º–∏"
echo ""
echo "üìä –†–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ø–∞–ø–∫–µ dist/"
echo "   - –ì–ª–∞–≤–Ω–∞—è: dist/index.html"
echo "   - –ì–æ—Ä–æ–¥–∞: dist/city/[slug]/index.html"
echo "   - –¢–æ–≤–∞—Ä—ã: dist/product/[id]/index.html"
echo ""
echo "üöÄ –ú–æ–∂–Ω–æ –¥–µ–ø–ª–æ–∏—Ç—å!"
