# Управление городами и регионами

## Как добавить новый город

1. Зайдите в админ-панель (`/admin`)
2. Нажмите на карточку **"Города"**
3. Нажмите кнопку **"Добавить город"**
4. Заполните форму:
   - **Название города** (например: Новосибирск)
   - **Регион** (например: Новосибирская область)
   - **Часовой пояс** - выберите из списка
   - **Часы работы** (опционально, например: 09:00 - 21:00)
5. Нажмите **"Добавить"**

✅ **Готово!** Город автоматически добавится в нужный регион и появится в селекторе городов на сайте.

## Как редактировать город

1. Найдите город в списке
2. Нажмите кнопку с иконкой карандаша
3. Измените нужные поля
4. Нажмите **"Обновить"**

## Как удалить город

1. Найдите город в списке
2. Нажмите кнопку с иконкой корзины
3. Подтвердите удаление

⚠️ **Внимание**: Город не удаляется физически, а просто скрывается (is_active = false)

## Управление регионами

**Регионы создаются автоматически** при добавлении первого города в регион.

Например:
- Добавили город **Москва** с регионом **"Москва и Московская область"**
- Регион появился автоматически
- Добавили город **Подольск** с тем же регионом
- Оба города теперь в одном регионе

## Структура данных

### База данных (таблица cities):
- `id` - уникальный ID
- `name` - название города
- `region` - название региона  
- `timezone` - часовой пояс (например: Europe/Moscow, Asia/Barnaul)
- `work_hours` - часы работы (опционально)
- `is_active` - активен ли город (true/false)

### Автоматически создается:
- Запись в таблице `city_contacts` с шаблонными контактами
- Города группируются по регионам в селекторе

## Как работает группировка

Города **автоматически группируются** по полю `region`:

```
Москва и Московская область
  → Москва
  → Подольск
  
Алтайский край
  → Барнаул
  → Бийск
```

## Часовые пояса России

Доступные часовые пояса в системе:

| Часовой пояс | Разница с МСК | Примеры городов |
|--------------|---------------|-----------------|
| Europe/Moscow | МСК | Москва, Санкт-Петербург |
| Europe/Samara | МСК+1 | Самара, Ижевск |
| Asia/Yekaterinburg | МСК+2 | Екатеринбург, Челябинск |
| Asia/Omsk | МСК+3 | Омск |
| Asia/Novosibirsk | МСК+4 | Новосибирск |
| Asia/Barnaul | МСК+4 | Барнаул, Бийск |
| Asia/Krasnoyarsk | МСК+4 | Красноярск |
| Asia/Irkutsk | МСК+5 | Иркутск |
| Asia/Yakutsk | МСК+6 | Якутск |
| Asia/Vladivostok | МСК+7 | Владивосток |
| Asia/Magadan | МСК+8 | Магадан |
| Asia/Kamchatka | МСК+9 | Петропавловск-Камчатский |

## Связанные настройки

После добавления города не забудьте настроить:

1. **Контакты города** - в разделе "Контакты городов"
   - Телефон
   - Email
   - Адрес
   - Информация о доставке

2. **Населенные пункты** - в разделе "Населенные пункты"
   - Добавьте районы доставки
   - Укажите стоимость доставки

## Технические детали

- Города хранятся в PostgreSQL таблице `cities`
- API endpoint: `/backend/cities/`
- Фронтенд компонент: `src/pages/AdminCities.tsx`
- Селектор городов: `src/components/CitySelector.tsx`
- Контекст: `src/contexts/CityContext.tsx`
